# 移动端布局

## 什么是移动端？

- 主要是一些**手持设备**，最具有代表性就是手机和平板，比如智能手表，掌上游戏机等移动设备；

- 在前端开发中，移动端指的就是手机和ipad

- 在移动端上面运行项目，我们就称为移动端的项目

- **移动端主要关注点：各种类型移动设备**（PC端关注点：各种浏览器）

  

移动端页面设计一般分为:

1. 响应式布局
    - 通过媒体查询技术实现不同屏幕都有良好的用户体验；一稿多端使用
2. 移动端布局
    - pc端和移动端的是相互的独立，pc端一套页面，移动端一套页面

移动端的学习：

第一阶段：移动端页面的设计和布局技巧

第二阶段：实现移动端的脚本设计

第三阶段：基于框架来进行移动端开发

第四阶段：学习移动端开发原理，app 和微信小程序

## 移动端布局应用场景？

- 例如：王者荣耀：https://pvp.qq.com/（PC端一套） https://pvp.qq.com/m/（移动端单独一套） 
- 背景：因为不同的手机尺寸和屏幕像素差距越来越大，导致我们使用响应式布局很难保证所有主流的手机屏幕都可以100%适配。
- 概念：使用css3的单位以及弹性布局等技术来实现移动端布局。一般移动端布局和pc端布局不一样



## 移动端单位尺寸的转化？

## 英寸

- 一般使用**英寸**来描述屏幕的**物理大小**。

- 1英寸=2.54cm（相当于大拇指指甲盖的大小）

    ![image-20200917142000653](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/zhangrui/20210301110607.png)

## 像素

- 概念：即一个小方块，具有特定的位置和样式

###  分辨率（DPI）

- 概念：即每英寸包括的像素的数量，每英寸的点数
- 分辨率越高，每英寸包含点数越多，画面越清晰 
- 物理分辨率：是屏幕一出厂已经确定的像素，屏幕上有多少个发光点
- 逻辑分辨率：真正用于显示屏幕内容的像素（移动端开发只需要参考它即可）
- 逻辑分辨率里面的一个像素，可以对应物理  分辨率里面多个像素（发光点）



![image-20211008220947602](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/longzongfei/202110082209946.png)







设置逻辑分辨率的作用？

**一个像素**对应**多个**屏幕**发光点**



![image-20211008221524195](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/longzongfei/202110082215617.png)







- 常用的分辨率

    ![image-20200917153453488](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/zhangrui/20210301110937.png)

## 视口（viewport）

- 概念：视口就是手机屏幕用于显示的页面的区域

### 布局视口（默认）

- 按照百分比来设计网页，在不同的屏幕下，显示的大小由屏幕决定的，但是在移动端，本身屏幕就小，如果显示pc端页面，可能会造成页面的排版混乱，移动端浏览器为了正常显示pc端的页面，将移动端浏览器设置一个值980px。视口的大小一旦确定，100%值就确定了。

    这就是布局视口（开发中需要更改）

    ![20201230224216](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/zhangrui/20210301115029.png)

- 常见的布局视口

    ![wps2-1600328339486](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/zhangrui/20210301115142.jpg)

### 视觉视口

- 用户通过屏幕真实看到的区域，即移动端屏幕的可视区域。
- 视觉视口默认等于当前浏览器窗口的大小，对于移动端就是手机显示屏幕的大小

![wps3](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/zhangrui/20210301115456.png)

- 当用户对浏览器进行缩放时，不会改变布局视口的大小，只是将页面在视觉视口呈现效果改变。

- 视觉视口一般就是浏览器的窗口的大小，自己定义的一个概念

    ```css
    .box{
    	width:100%
    }
    默认不会参考视觉视口的宽度，默认按照布局视口
    ```

### 理想视口

- 页面在移动端设备完美显示的视口，按照手机的逻辑分辨率（**视觉视口**）进行页面布局

- 理想视口的大小=视觉视口，移动端网页就可以完美显示

- 需要手动设置：通过meta标签去开启理想视口

    ```html
    <!-- 开启理想视口 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    ```

    - width=device-width：页面宽度等于设备的逻辑像素（视觉视口），即使用理想视口
    -  initial-scale=1.0：页面的默认比例为1.0，保证css中1px就等于移动端页面中的1px

    - | **属性**      | **值**               | **描述**                 |
        | ------------- | -------------------- | ------------------------ |
        | width         | 数值或者device-width | 设置viewport宽度         |
        | height        | 数值                 | 设置viewport高度         |
        | initial-scale | 数字                 | 设置屏幕的缩放比列       |
        | maximum-scale | 数字                 | 用户最小缩放比列         |
        | minimum-scale | 数字                 | 用户最大缩放比列         |
        | user-scalable | yes、no              | 设置用户是否可以缩放屏幕 |

    

一般移动端布局会使用css3提供的单位来使用

## 单位

### px 像素

- 固定单位，绝对长度单位

### 相对单位

#### vw(重点)

- 参考视口的宽度，其中100vw就是一个视口的宽度   而100vw也就相当于屏幕的100%宽度  
  - 注意：百分比是参考父盒子的宽度
- 视口宽度：就是手机屏幕显示的宽度

#### vh

- 参考视口的高度，100vh=一个视口的高度

#### em

- 参考当前盒子的font-size大小，1em=1个字体大小(16PX)
- 注意：如果当前盒子没有设置font-size，可以从父盒子去继承，因为font-size可以被自动继承；直到浏览器默认的字体大小为止。IE都支持

#### rem（重点）

- 只参考html标签的文字大小，如果html标签没有设置，使用浏览器默认的字体大小(默认是16px,即 1rem=16px)。

#### 单位抉择

- em，rem是font-size的大小，一般用于文字适配，其中em适合局部适配，rem适合用于整个页面的文字适配
- rem使用用于整个移动端页面的整体布局，em适合局部布局使用
- vw和vh是参考视口的宽高绝对的，一般用于设置大盒子的尺寸
- vw和vh都是通过视口决定，通过min-width和min-height来限制大小。
- 移动端布局采用的方式rem进行布局。

## 移动端适配

**认识移动端布局**

- 以手机自身的逻辑分辨率为页面的宽度，进行页面的布局，而我们把这种针对移动端的布局方式就称为移动端布局。
- 移动端页面实际参考的尺寸就是手机的逻辑分辨率（视口），比如，iPhone6、7、8   375
- 每个手机的逻辑分辨率是不同，导致了页面存在宽度不同，即页面宽度存在兼容，就需要进行页面适配

### 标准移动端页面

1. 设计网页的时候，页面的宽度和浏览器显示区域保持一致。
2. 默认显示缩放比例和pc端保持一致，调整缩放比例为1.0
3. 不允许用户自己缩放页面
   
    - 通过meta设置理想视口，并且用户不能缩放，缩放比例1.0(比例为1:1也就相当于限制用户不能缩放)
    
      ```
      <!-- 开启理想视口 -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      ```
    
      

拿到的psd原稿尺寸分析：

- 640px  ——》320px  
- 750px ——>375px   2倍图
- 1125px ——> 375px  3倍图

### rem+媒体查询

1. 自己根据不同的屏幕，换算出每种字体的比例

    - 盒子的尺寸是以rem为单位
    - 需要利用媒体查询来设置当屏幕的大小不同时，html标签采用不同font-size
    - 像具体的内容处理跟以前一样
    - 以rem代替px，百分比可以保留

    步骤：

    1. 根据原稿进行页面的测量，在开发过程中找个移动端的设备进行开发，开发使用px为单位

        比如，原稿是750px ，开发以iPhone 678为例（375px），测量出来的像素进行减半

    2. 给参考的设备的设置媒体查询，设置一个html：font-size作为参考值，将px换算成rem

    3. 可以使用媒体查询去适配不同的设备

### 移动适配——脚本

```js
// 设计了一个函数，这个函数用于获取屏幕的宽度，动态给html标签设置内联样式font-size
(function(doc, win) {
    // 获取到html这个标签
    let docEL = doc.documentElement;
    // 检测目前屏幕时横屏还是竖屏
    let resizeEvent = "orientationchange" in window ? "orientationchange" : "resize",
    //设置不同屏幕对应的font-size
        recalc = function() {
            // 获取的当前的设备的宽度
            const clientWidth = docEL.clientWidth;
            if (!clientWidth) return;
            // 屏幕宽度大于750px，设置html标签的font-size为100px
            if (clientWidth > 750) {
                docEL.style.fontSize = "100px";
            } else {
                // 屏幕宽度小于或等于750px：屏幕的宽度除以750 * 100px  得出当前屏幕应该html设置font-size的值
                // 以iphone 678为例 375px font-size：50px
                docEL.style.fontSize = (clientWidth / 750) * 100 + "px";
            }
        }
    recalc();
    // 窗口发生变化，重新计算
    win.addEventListener(resizeEvent, recalc, false);
    // 页面加载了，重新计算
    doc.addEventListener("DOMContentLoaded", recalc, false)

})(document, window)
```

开发步骤：

1. 根据原稿进行页面的测量，在开发过程中找个移动端的设备进行开发，开发使用px为单位(以iPhone 678为例)

    比如，原稿时750px ，开发以iPhone 678为例（375px），测量处理的像素进行减半

2. 先页面按照px进行布局，以iphone 678进行页面不会

3. 在iPhone 678下面设置了html：font-size：50px作为参考值，将px 转为 rem

4. 可以使用px to rem将单位进行转化rem （快捷键：alt + z）

5. 引入脚本就可以适配各个设备